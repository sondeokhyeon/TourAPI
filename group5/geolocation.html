<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Nitro &mdash; Free HTML5 Bootstrap Website Template by FreeHTML5.co</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free HTML5 Website Template by FreeHTML5.co" />
	<meta name="keywords" content="free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive"
	/>
	<meta name="author" content="FreeHTML5.co" />

	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content="" />
	<meta property="og:image" content="" />
	<meta property="og:url" content="" />
	<meta property="og:site_name" content="" />
	<meta property="og:description" content="" />
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
	<link rel="shortcut icon" href="favicon.ico">

	<link href='https://fonts.googleapis.com/css?family=Roboto:400,300,600,400italic,700' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>

	<!-- Animate.css -->
	<link rel="stylesheet" href="../css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="../css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="../css/bootstrap.css">
	<!-- Owl Carousel -->
	<link rel="stylesheet" href="../css/owl.carousel.min.css">
	<link rel="stylesheet" href="../css/owl.theme.default.min.css">
	<!-- Theme style  -->
	<link rel="stylesheet" href="../css/style.css">
	<!-- custom common css-->
	<link rel="stylesheet" href="../css/customused.css">

	<!-- Modernizr JS -->
	<script src="../js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="../js/respond.min.js"></script>
	<![endif]-->

   

</head>

<body>

	<div id="fh5co-page">
		<a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle">
			<i></i>
		</a>
		<aside id="fh5co-aside" role="complementary" class="border js-fullheight">
			<h1 id="fh5co-logo">
				<a href="../cmm/index.html">
					<img src="../images/logo.png" alt="logo">
				</a>
			</h1>
			<nav id="fh5co-main-menu" role="navigation">
				<ul>
					<a href="../cmm/index.html">Home</a></li><br><br>
					<li data-toggle="collapse" data-target="#collapse2"><a href="#">어디로 갈까</a></li>
					<div class="collapse in" id="collapse2" aria-expanded="true"> 
						<ul class="nav">
							<li><a href="../group2/tourist.html">관광지</a></li>
							<li><a href="../group2/festival.html">축제﹒행사</a></li>
							<li><a href="../group2/tourcourse.html">추천 여행코스</a></li>
						</ul>
					</div>
					<li data-toggle="collapse" data-target="#collapse3"><a href="#">무엇을 먹을까</a></li>
					<div class="collapse in" id="collapse3" aria-expanded="true"> 
						<ul class="nav">
							<li><a href="../group3/eatery.html">음식점정보</a></li>
						</ul>
					</div>
					<li data-toggle="collapse" data-target="#collapse4"><a href="#">어디서 잘까</a></li>
					<div class="collapse in" id="collapse4" aria-expanded="true"> 
						<ul class="nav">
							<li><a href="../group4/accommodation.html">숙박업소정보</a></li>
						</ul>
					</div>
				</ul>
			</nav>
		</aside>

		<div id="fh5co-main">
			<div class="fh5co-narrow-content">
				<h2 class="animate-box" data-animate-effect="fadeInLeft">
					위치기반<span id="demo"></span>
					<button class="btn btn-default" onclick="getLocation()">위치불러오기</button>
					<div class="rangeWrap" style="margin-top: 30px;">
						<span class="kilometer" data-toggle="1">1km</span>
						<span class="kilometer" data-toggle="5">5km</span>
						<span class="kilometer" data-toggle="10">10km</span>
						<span class="kilometer" data-toggle="20">20km</span> 
					</div>
				</h2>
				
				<div class="row animate-box" id="travelContents" data-animate-effect="fadeInLeft">
					<div id="information" style="margin-top: 15%; margin-left: 5%; display: block;"><h1 id="notification" style="color: #8c8b8b;">위치 불러오기를 누르시면<br>주변정보를 가져옴니다</h1></div>
				</div>
				<div class="text-right" id="moreViewWrap"><a href="javascript:void(0)" onclick="moreView()">더보기</a></div>
			</div>
		</div>
	</div>

	<!-- jQuery -->
	<script src="../js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="../js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="../js/bootstrap.min.js"></script>
	<!-- Carousel -->
	<script src="../js/owl.carousel.min.js"></script>
	<!-- Stellar -->
	<script src="../js/jquery.stellar.min.js"></script>
	<!-- Waypoints -->
	<script src="../js/jquery.waypoints.min.js"></script>
	<!-- Counters -->
	<script src="../js/jquery.countTo.js"></script>
	<!-- MAIN JS -->
	<script src="../js/main.js"></script>
	<!-- 180510 common 추가 -->
	<script src="../js/common.js"></script>

	<script>
		$(function () {
			common.leftMenuImport();
			draw.init();
			draw.kilometerSet();
		})
	var parsing = { 
		test:function(data) {
			console.log(data)
		},
		dataParsing: function (data) {
			var list = data.response.body.items.item
			if(Array.isArray(list)) {
				if (list != undefined ) {
					$.each(list, function (i, item) {
						var InfoElements =
							"<div class='col-xs-6 col-sm-6 col-md-4 col-lg-3'>"
						+   "<a href='../cmm/detail.html?id=" + item.contentid + "&item=" + item.contenttypeid + "'" + ">"		
						+	"<div class='thumbnail'>"
						+		"<img class=" + "'img-responsive'" + "src="+ "'" + item.firstimage + "'" + "onError="  + "this.onerror=null;this.src='../images/default.png';" +  ">"
						+			"<div class='caption text-center'>"
						+					"<h5>"+ item.title +"</h5>"
						+					"<h6>"+ item.addr1 + "</h6>"
						+			"</div>"
						+	"</div>"  
						+	"</a>" 
						+ "</div>"  
						$("#travelContents").append(InfoElements)
					})
				} else {
					$(".text-right").css("display","none");
				}
			} else if (data.response.body.items === '') {
					$(".text-right").css("display","none");
			} else {
					var infoElements =
							"<div class='col-xs-6 col-sm-6 col-md-4 col-lg-3'>"
						+   "<a href='../cmm/detail.html?id=" + list.contentid + "&item=" + list.contenttypeid + "'" + " target='_blank'>"		
						+	"<div class='thumbnail'>"
						+		"<img class=" + "'img-responsive'" + "src="+ "'" + list.firstimage + "'" + "onError="  + "this.onerror=null;this.src='../images/default.png';" +  ">"
						+			"<div class='caption text-center'>"
						+					"<h5>"+ list.title +"</h5>"
						+					"<h6>"+ list.addr1 + "</h6>"
						+			"</div>"
						+	"</div>"
						+ 	"</a>"   
						+ "</div>"  
						$("#travelContents").append(infoElements)
			}
		}
	}

	var draw = {
		elementCount 	: 0,
		mapY		 	: 0,
		mapX		 	: 0,
		searchArrange	: 0,

		init     : function() {
			this.elementCount 	= 1;
			this.mapY		  	= 37.497891;
			this.mapX		  	= 127.027337;
			this.searchArrange	= 2000;
		},
		elements : function() {
			common.getInfo('get', 
							'locationBasedList', 
							'MobileOS=ETC&MobileApp=AppTest&arrange=E&numOfRows=24&pageNo=' 
							+ this.elementCount 
							+'&mapY='   + this.mapY 
							+'&mapX='   + this.mapX 
							+'&radius=' + this.searchArrange, 
							parsing.dataParsing);
		},
		kilometerSet : function() {
			$('.kilometer').click(function() { 
				var $ref = $(this).context.attributes[1].value
				if ($ref === '1') {
					draw.searchArrange = 1000;
					$('.kilometer').removeClass('active')
					$(this).addClass('active');
				} else if ($ref === '5') {
					draw.searchArrange = 5000;
					$('.kilometer').removeClass('active')
					$(this).addClass('active');
				} else if ($ref === '10') {
					draw.searchArrange = 10000;
					$('.kilometer').removeClass('active')
					$(this).addClass('active');
				} else if ($ref === '20') {
					draw.searchArrange = 20000;
					$('.kilometer').removeClass('active')
					$(this).addClass('active');
				}
			}) 
		}
	}

		function getLocation() {
			$('#notification').text("위치정보를 가져오고 있습니다...");
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(getGeolocation, getError); 
			} else {
				alert('현재 사용하는 브라우저는 위치정보를 가져올수 없습니다.')
			}
		}

		function getGeolocation(position) {
			draw.mapY = position.coords.latitude;
			draw.mapX = position.coords.longitude;
			$('#moreViewWrap').css('display','block');
			$('#information').css('display','none');
			draw.elements();
		}

		function getError(error) {
			switch(error.code) {
				case error.PERMISSION_DENIED:
					alert("위치정보 확인을 거부하였습니다.")
					break;
				case error.POSITION_UNAVAILABLE:
					alert("위치정보를 사용할 수 없습니다.")
					break;
				case error.TIMEOUT:
					alert("위치정보를 확인하는데 실패하였습니다.\n(TIMEOUT)")
					break;
				case error.UNKNOWN_ERROR:
					alert("위치정보를 확인하는데 실패하였습니다.\n(알수없는 오류)")
					break;
			}
		}

		
	


	</script>
</body>

</html>